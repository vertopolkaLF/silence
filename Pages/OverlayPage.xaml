<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="silence_.Pages.OverlayPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="Transparent">

    <ScrollViewer VerticalScrollBarVisibility="Auto" 
                  HorizontalScrollBarVisibility="Disabled">
        <StackPanel Spacing="24" Margin="24,24,24,24">
            <TextBlock Text="Overlay" FontSize="24" FontWeight="SemiBold"/>
            
            <!-- Enable/Disable Overlay -->
            <StackPanel Spacing="8">
                <ToggleSwitch x:Name="OverlayEnabledToggle"
                              Header="Enable overlay"
                              OffContent="Overlay disabled"
                              OnContent="Overlay enabled"
                              Toggled="OverlayEnabledToggle_Toggled"/>
                <TextBlock Text="Shows mute status on top of all windows"
                           Opacity="0.6"
                           FontSize="12"/>
            </StackPanel>

            <!-- Visibility Mode -->
            <StackPanel x:Name="VisibilityModePanel" Spacing="12">
                <TextBlock Text="Visibility Mode" FontWeight="SemiBold" FontSize="14"/>
                <RadioButtons x:Name="VisibilityModeSelector" SelectionChanged="VisibilityModeSelector_SelectionChanged">
                    <RadioButton Content="Always visible" Tag="Always"/>
                    <RadioButton Content="Visible when muted" Tag="WhenMuted" IsChecked="True"/>
                    <RadioButton Content="Visible when unmuted" Tag="WhenUnmuted"/>
                    <RadioButton Content="Show after toggle" Tag="AfterToggle"/>
                </RadioButtons>
                
                <!-- Duration slider (only visible when AfterToggle is selected) -->
                <StackPanel x:Name="DurationPanel" Spacing="8" Visibility="Collapsed" Margin="0,8,0,0">
                    <TextBlock x:Name="DurationLabel" Text="Duration: 2.0s"/>
                    <Slider x:Name="DurationSlider"
                            Minimum="0.1"
                            Maximum="10"
                            StepFrequency="0.1"
                            TickFrequency="1"
                            TickPlacement="Outside"
                            Value="2"
                            ValueChanged="DurationSlider_ValueChanged"/>
                </StackPanel>
            </StackPanel>

            

            <!-- Screen Selection -->
            <StackPanel x:Name="ScreenSelectionPanel" Spacing="12">
                <TextBlock Text="Screen" FontWeight="SemiBold" FontSize="14"/>
                <ComboBox x:Name="ScreenComboBox"
                          HorizontalAlignment="Stretch"
                          SelectionChanged="ScreenComboBox_SelectionChanged"
                          PlaceholderText="Select screen..."/>
                <TextBlock Text="Select which monitor to display the overlay on"
                           Opacity="0.6"
                           FontSize="12"/>
            </StackPanel>

            <!-- Position -->
            <StackPanel x:Name="PositionPanel" Spacing="12">
                <TextBlock x:Name="CurrentPositionText" 
                           Text="Current: Center, Bottom 20%"
                           Opacity="0.6"
                           FontSize="12"/>
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <Button x:Name="SetPositionButton"
                            Content="Set Position"
                            Click="SetPositionButton_Click"
                            HorizontalAlignment="Left"/>
                    <Button x:Name="DonePositionButton"
                            Content="Done"
                            Click="DonePositionButton_Click"
                            Visibility="Collapsed"
                            Style="{StaticResource AccentButtonStyle}"
                            HorizontalAlignment="Left"/>
                </StackPanel>
                <TextBlock Text="Click to show overlay and drag it to desired position. The overlay will snap to center when close to the middle of the screen. Press ESC or click Done to save."
                           Opacity="0.6"
                           FontSize="12"
                           TextWrapping="Wrap"/>
            </StackPanel>

            <!-- Preview/Test -->
            <StackPanel Spacing="12">
                <TextBlock Text="Preview" FontWeight="SemiBold" FontSize="14"/>
                <Button x:Name="PreviewOverlayButton"
                        Content="Preview Overlay"
                        Click="PreviewOverlayButton_Click"
                        HorizontalAlignment="Left"/>
            </StackPanel>
            
            <!-- Appearance Settings -->
            <StackPanel x:Name="AppearancePanel" Spacing="12">
                <TextBlock Text="Appearance" FontWeight="SemiBold" FontSize="24"/>
                
                <!-- Variant Selector -->
                <StackPanel Spacing="12" Margin="0,12,0,0">
                    <TextBlock Text="Overlay Style" FontWeight="SemiBold" FontSize="14"/>
                    <Grid ColumnSpacing="12" ColumnDefinitions="52, 52, 52, 52, 52">
                        <!-- Mic Icon Variant -->
                        <Button x:Name="MicIconVariantButton"
                                Grid.Column="0"
                                Padding="0"
                                Background="Transparent"
                                BorderThickness="0"
                                CornerRadius="8"
                                Click="VariantButton_Click"
                                Tag="MicIcon">
                            <Button.Resources>
                                <CornerRadius x:Key="ControlCornerRadius">8</CornerRadius>
                            </Button.Resources>
                            <StackPanel Spacing="4">
                                <Border x:Name="MicIconVariantBorder"
                                        Width="52" Height="52"
                                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                                        BorderThickness="1"
                                        CornerRadius="8"
                                        Background="{ThemeResource CardBackgroundFillColorDefaultBrush}">
                                    <Border Width="40" Height="40"
                                            Background="{ThemeResource LayerFillColorDefaultBrush}"
                                            CornerRadius="6"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center">
                                        <FontIcon Glyph="&#xE720;" FontSize="20" Foreground="#28A745"/>
                                    </Border>
                                </Border>
                                <TextBlock Text="Mic Icon" 
                                           FontSize="11" 
                                           HorizontalAlignment="Center"
                                           Opacity="0.8"/>
                            </StackPanel>
                        </Button>
                        
                        <!-- Dot Variant -->
                        <Button x:Name="DotVariantButton"
                                Grid.Column="1"
                                Padding="0"
                                Background="Transparent"
                                BorderThickness="0"
                                CornerRadius="8"
                                Click="VariantButton_Click"
                                Tag="Dot">
                            <Button.Resources>
                                <CornerRadius x:Key="ControlCornerRadius">8</CornerRadius>
                            </Button.Resources>
                            <StackPanel Spacing="4">
                                <Border x:Name="DotVariantBorder"
                                        Width="52" Height="52"
                                        BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                                        BorderThickness="1"
                                        CornerRadius="8"
                                        Background="{ThemeResource CardBackgroundFillColorDefaultBrush}">
                                    <Ellipse Width="20" Height="20" 
                                             Fill="#28A745"
                                             HorizontalAlignment="Center"
                                             VerticalAlignment="Center"/>
                                </Border>
                                <TextBlock Text="Dot" 
                                           FontSize="11" 
                                           HorizontalAlignment="Center"
                                           Opacity="0.8"/>
                            </StackPanel>
                        </Button>
                    </Grid>
                </StackPanel>
                
                <!-- Scale (Universal) -->
                <StackPanel Spacing="8" Margin="0,12,0,0">
                    <TextBlock x:Name="ScaleLabel" Text="Size scale: 100%"/>
                    <Slider x:Name="ScaleSlider"
                            Minimum="10"
                            Maximum="200"
                            StepFrequency="5"
                            TickFrequency="25"
                            TickPlacement="Outside"
                            Value="100"
                            ValueChanged="ScaleSlider_ValueChanged"/>
                </StackPanel>
                
                <!-- Content Opacity (Universal) -->
                <StackPanel Spacing="8" Margin="0,8,0,0">
                    <TextBlock x:Name="ContentOpacityLabel" Text="Opacity: 100%"/>
                    <Slider x:Name="ContentOpacitySlider"
                            Minimum="20"
                            Maximum="100"
                            StepFrequency="5"
                            TickFrequency="10"
                            TickPlacement="Outside"
                            Value="100"
                            ValueChanged="ContentOpacitySlider_ValueChanged"/>
                </StackPanel>
                
                <!-- Mic Icon Specific Settings -->
                <StackPanel x:Name="MicIconSettingsPanel" Spacing="12" Margin="0,12,0,0">
                
                <!-- Show Text -->
                <ToggleSwitch x:Name="ShowTextToggle"
                              Header="Show text"
                              OffContent="Icon only"
                              OnContent="Icon with text"
                              Toggled="ShowTextToggle_Toggled"/>
                
                <!-- Icon Style -->
                <TextBlock Text="Icon style" Margin="0,8,0,0"/>
                <ComboBox x:Name="IconStyleComboBox"
                          HorizontalAlignment="Stretch"
                          SelectionChanged="IconStyleComboBox_SelectionChanged">
                    <ComboBoxItem Content="Colored (red/green)" Tag="Colored"/>
                    <ComboBoxItem Content="Monochrome" Tag="Monochrome"/>
                </ComboBox>
                
                <!-- Background Style -->
                <TextBlock Text="Background" Margin="0,8,0,0"/>
                <ComboBox x:Name="BackgroundStyleComboBox"
                          HorizontalAlignment="Stretch"
                          SelectionChanged="BackgroundStyleComboBox_SelectionChanged">
                    <ComboBoxItem Content="Dark" Tag="Dark"/>
                    <ComboBoxItem Content="Light" Tag="Light"/>
                </ComboBox>
                
                <!-- Background Opacity -->
                <StackPanel Spacing="8" Margin="0,12,0,0">
                    <TextBlock x:Name="OpacityLabel" Text="Background opacity: 90%"/>
                    <Slider x:Name="OpacitySlider"
                            Minimum="0"
                            Maximum="100"
                            StepFrequency="5"
                            TickFrequency="10"
                            TickPlacement="Outside"
                            Value="90"
                            ValueChanged="OpacitySlider_ValueChanged"/>
                </StackPanel>
                
                <!-- Border Radius -->
                <StackPanel Spacing="8" Margin="0,8,0,0">
                    <TextBlock x:Name="BorderRadiusLabel" Text="Border radius: 6px"/>
                    <Slider x:Name="BorderRadiusSlider"
                            Minimum="0"
                            Maximum="24"
                            StepFrequency="1"
                            TickFrequency="4"
                            TickPlacement="Outside"
                            Value="6"
                            ValueChanged="BorderRadiusSlider_ValueChanged"/>
                </StackPanel>
                
                <!-- Show Border -->
                <ToggleSwitch x:Name="ShowBorderToggle"
                              Header="Overlay border"
                              OffContent="No border"
                              OnContent="Show border"
                              Margin="0,8,0,0"
                              Toggled="ShowBorderToggle_Toggled"/>
                
                </StackPanel>
                <!-- End Mic Icon Specific Settings -->
                
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</Page>
